{"version":3,"file":"static/js/686.70745fc5.chunk.js","mappings":"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","sources":["components/UserForm/FileUploadComponent.jsx","components/UserForm/UserForm.jsx","components/UserForm/createIMGElement.js","pages/AccountPage/AccountPage.jsx"],"sourcesContent":["import React, { useRef } from 'react';\nimport {\n  StyledAvatarContainer,\n  StyledAvatarText,\n  StyledAvatarWrapper,\n  StyledBtnLink,\n} from './UserForm.styled';\nimport { AddIconMediaSizes } from './Icons';\nimport useAuth from 'hooks/useAuth';\n\nconst FileUploadComponent = ({ handleFiles, fileListRef }) => {\n  const { user } = useAuth();\n  const fileInputRef = useRef(null);\n\n  const firstLetterUserName = user.name.charAt(0).toUpperCase();\n\n  const handleFileSelect = () => {\n    if (fileInputRef.current) {\n      fileInputRef.current.click();\n    }\n  };\n\n  return (\n    <StyledAvatarWrapper>\n      <input\n        type=\"file\"\n        ref={fileInputRef}\n        multiple\n        accept=\"image/*\"\n        style={{ display: 'none' }}\n        onChange={handleFiles}\n        name=\"avatar\"\n      />\n      <StyledBtnLink href=\"#\" onClick={handleFileSelect}>\n        <AddIconMediaSizes />\n      </StyledBtnLink>\n      <StyledAvatarContainer id=\"fileList\" ref={fileListRef}>\n        {user.avatarURL ? (\n          <img src={user.avatarURL} alt=\"avatar\" />\n        ) : (\n          <StyledAvatarText>{firstLetterUserName}</StyledAvatarText>\n        )}\n      </StyledAvatarContainer>\n    </StyledAvatarWrapper>\n  );\n};\n\nexport default FileUploadComponent;\n","import 'react-datepicker/dist/react-datepicker.css';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport {\n  FormField,\n  Field,\n  StyledFormWrapper,\n  Form,\n  StyledUserName,\n  StyledUserDiscription,\n  StyledLabelText,\n  StyledLabelWrapp,\n  StyledBtn,\n  StyledDatePicker,\n  StyledCalendar,\n  Column,\n  ErrorMessage,\n  StyledErrorText,\n  FileInputLabel,\n} from './UserForm.styled';\nimport FileUploadComponent from './FileUploadComponent';\nimport { useEffect, useRef, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport useAuth from 'hooks/useAuth';\nimport { updateUser } from 'redux/auth/operations';\nimport { ChevronDownIcon } from './Icons';\nimport { createIMGElement } from './createIMGElement';\n\nconst UserSchema = Yup.object().shape({\n  avatar: Yup.string().nullable(),\n  name: Yup.string()\n    .min(3, 'minimum 3 letters')\n    .max(20)\n    .required('Please enter your name'),\n  birthday: Yup.string().matches(\n    /^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[01])$/,\n    'Please use format yyyy-mm-dd'\n  ),\n  email: Yup.string()\n    .matches(\n      /^[a-z0-9]+@[a-z]+\\.[a-z]{2,3}$/,\n      'Please use format example@gmail.com'\n    )\n    .required('Please enter your email'),\n  phone: Yup.string().matches(\n    /^(\\+\\d{1,3}|\\d{1,3}) \\(\\d{3}\\) \\d{3} \\d{2} \\d{2}$/,\n    'Please use format 38 (097) 256 34 77'\n  ),\n  skype: Yup.string().matches(\n    /^(\\+\\d{1,3}|\\d{1,3}) \\(\\d{3}\\) \\d{3} \\d{2} \\d{2}$/,\n    'Please use  format 38 (097) 256 34 77'\n  ),\n});\n\nexport const UserForm = () => {\n  const { user, error } = useAuth();\n  const dispatch = useDispatch();\n\n  const [startDate, setStartDate] = useState(\n    new Date(user.birthday) || new Date()\n  );\n  const [userAvatar, setUserAvatar] = useState(null);\n  const [formChanged, setFormChanged] = useState(false);\n\n  const form = useRef(null);\n  const fileListRef = useRef(null);\n\n  const todayDate = startDate.toISOString().slice(0, 10);\n\n  const handleFormChange = () => {\n    setFormChanged(true);\n  };\n\n  const handleFiles = event => {\n    const img = createIMGElement(event);\n    fileListRef.current.innerHTML = '';\n    fileListRef.current.appendChild(img);\n\n    setUserAvatar(event.currentTarget.files[0]);\n    handleFormChange();\n  };\n\n  useEffect(() => {\n    const formFields = form.current.querySelectorAll('input');\n    const formFieldsArray = Array.from(formFields);\n\n    const fieldChangeHandler = () => {\n      setFormChanged(true);\n    };\n\n    formFieldsArray.forEach(field => {\n      field.addEventListener('change', fieldChangeHandler);\n    });\n\n    return () => {\n      formFieldsArray.forEach(field => {\n        field.removeEventListener('change', fieldChangeHandler);\n      });\n    };\n  }, [user.name, startDate, user.email, user.phone, user.skype]);\n\n  return (\n    <StyledFormWrapper>\n      <Formik\n        initialValues={{\n          avatar: userAvatar,\n          name: user.name,\n          birthday: todayDate || user.birthday,\n          email: user.email,\n          phone: user.phone || '',\n          skype: user.skype || '',\n        }}\n        validationSchema={UserSchema}\n        validateOnChange={true}\n        onSubmit={async (values, { setSubmitting }) => {\n          if (formChanged) {\n            const data = new FormData(form.current);\n            dispatch(updateUser(data));\n          }\n        }}\n      >\n        <Form ref={form}>\n          <FileInputLabel>\n            <FileUploadComponent\n              handleFiles={handleFiles}\n              fileListRef={fileListRef}\n            />\n          </FileInputLabel>\n          <StyledUserName>{user.name}</StyledUserName>\n          <StyledUserDiscription>User</StyledUserDiscription>\n          {error && (\n            <StyledErrorText>Something went wrong, try again!</StyledErrorText>\n          )}\n          <StyledLabelWrapp>\n            <Column>\n              <FormField>\n                <StyledLabelText>User Name</StyledLabelText>\n                <Field id=\"name\" name=\"name\" placeholder=\"Name\" />\n                <ErrorMessage name=\"name\" component=\"div\" />\n              </FormField>\n              <StyledCalendar>\n                <StyledLabelText>Birthday</StyledLabelText>\n                <StyledDatePicker\n                  selected={startDate}\n                  onChange={date => {\n                    if (date) {\n                      setStartDate(date);\n                      handleFormChange();\n                    }\n                  }}\n                  dateFormat=\"yyyy-MM-dd\"\n                  name=\"birthday\"\n                  placeholderText=\"yyyy-mm-dd\"\n                />\n                <ChevronDownIcon color=\"var(--first-Text-Color)\" size={18} />\n              </StyledCalendar>\n              <FormField>\n                <StyledLabelText>Email</StyledLabelText>\n                <Field\n                  id=\"email\"\n                  name=\"email\"\n                  placeholder=\"example.com\"\n                  type=\"email\"\n                />\n                <ErrorMessage name=\"email\" component=\"div\" />\n              </FormField>\n            </Column>\n            <Column>\n              <FormField>\n                <StyledLabelText>Phone</StyledLabelText>\n                <Field\n                  id=\"phone\"\n                  name=\"phone\"\n                  placeholder=\"38 (097) 222 33 77\"\n                  type=\"tel\"\n                />\n                <ErrorMessage name=\"phone\" component=\"div\" />\n              </FormField>\n              <FormField>\n                <StyledLabelText>Skype</StyledLabelText>\n                <Field\n                  id=\"skype\"\n                  name=\"skype\"\n                  placeholder=\"Add a skype number\"\n                  type=\"text\"\n                />\n                <ErrorMessage name=\"skype\" component=\"div\" />\n              </FormField>\n            </Column>\n          </StyledLabelWrapp>\n          <StyledBtn type=\"submit\" disabled={!formChanged}>\n            Save changes\n          </StyledBtn>\n        </Form>\n      </Formik>\n    </StyledFormWrapper>\n  );\n};\n","export const createIMGElement = event => {\n  const files = event.target.files;\n  const img = document.createElement('img');\n  img.src = window.URL.createObjectURL(files[0]);\n  img.height = 60;\n  img.onload = function () {\n    window.URL.revokeObjectURL(this.src);\n  };\n  return img;\n};\n","import { UserForm } from 'components/UserForm/UserForm';\n\nconst AccountPage = () => {\n  return <UserForm />;\n};\n\nexport default AccountPage;\n"],"names":["_ref","handleFiles","fileListRef","user","useAuth","fileInputRef","useRef","firstLetterUserName","name","charAt","toUpperCase","_jsxs","StyledAvatarWrapper","children","_jsx","type","ref","multiple","accept","style","display","onChange","StyledBtnLink","href","onClick","current","click","AddIconMediaSizes","StyledAvatarContainer","id","avatarURL","src","alt","StyledAvatarText","UserSchema","Yup","shape","avatar","nullable","min","max","required","birthday","matches","email","phone","skype","UserForm","_useAuth","error","dispatch","useDispatch","_useState","useState","Date","_useState2","_slicedToArray","startDate","setStartDate","_useState3","_useState4","userAvatar","setUserAvatar","_useState5","_useState6","formChanged","setFormChanged","form","todayDate","toISOString","slice","handleFormChange","useEffect","formFields","querySelectorAll","formFieldsArray","Array","from","fieldChangeHandler","forEach","field","addEventListener","removeEventListener","StyledFormWrapper","Formik","initialValues","validationSchema","validateOnChange","onSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","data","wrap","_context","prev","next","setSubmitting","FormData","updateUser","stop","_x","_x2","apply","arguments","Form","FileInputLabel","FileUploadComponent","event","img","files","target","document","createElement","window","URL","createObjectURL","height","onload","revokeObjectURL","this","createIMGElement","innerHTML","appendChild","currentTarget","StyledUserName","StyledUserDiscription","StyledErrorText","StyledLabelWrapp","Column","FormField","StyledLabelText","Field","placeholder","ErrorMessage","component","StyledCalendar","StyledDatePicker","selected","date","dateFormat","placeholderText","ChevronDownIcon","color","size","StyledBtn","disabled"],"sourceRoot":""}